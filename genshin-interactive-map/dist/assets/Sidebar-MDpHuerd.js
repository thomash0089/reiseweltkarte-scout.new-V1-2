import{u as b,j as e,r as j}from"./index-B_xmjlEi.js";const M=()=>{const{state:s,dispatch:t}=b(),i=(c,m)=>{t({type:"TOGGLE_LAYER",layer:c,sublayer:m})};return e.jsxs("div",{className:"layer-management",children:[e.jsxs("div",{className:"layer-group",children:[e.jsx("div",{className:"layer-title",children:"Treasure Chests"}),e.jsxs("div",{className:"sublayer-list",children:[e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"chest-common",checked:s.activeLayers.treasureChests.common,onChange:()=>i("treasureChests","common")}),e.jsx("label",{htmlFor:"chest-common",children:"Common Chests"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"chest-exquisite",checked:s.activeLayers.treasureChests.exquisite,onChange:()=>i("treasureChests","exquisite")}),e.jsx("label",{htmlFor:"chest-exquisite",children:"Exquisite Chests"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"chest-precious",checked:s.activeLayers.treasureChests.precious,onChange:()=>i("treasureChests","precious")}),e.jsx("label",{htmlFor:"chest-precious",children:"Precious Chests"})]})]})]}),e.jsxs("div",{className:"layer-group",children:[e.jsx("div",{className:"layer-title",children:"Oculi"}),e.jsxs("div",{className:"sublayer-list",children:[e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"oculi-anemo",checked:s.activeLayers.oculi.anemoculi,onChange:()=>i("oculi","anemoculi")}),e.jsx("label",{htmlFor:"oculi-anemo",children:"Anemoculi"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"oculi-geo",checked:s.activeLayers.oculi.geoculi,onChange:()=>i("oculi","geoculi")}),e.jsx("label",{htmlFor:"oculi-geo",children:"Geoculi"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"oculi-electro",checked:s.activeLayers.oculi.electroculi,onChange:()=>i("oculi","electroculi")}),e.jsx("label",{htmlFor:"oculi-electro",children:"Electroculi"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"oculi-dendro",checked:s.activeLayers.oculi.dendroculi,onChange:()=>i("oculi","dendroculi")}),e.jsx("label",{htmlFor:"oculi-dendro",children:"Dendroculi"})]})]})]}),e.jsx("div",{className:"layer-group",children:e.jsxs("div",{className:"layer-title",children:[e.jsx("input",{type:"checkbox",id:"waypoints",checked:s.activeLayers.waypoints,onChange:()=>i("waypoints")}),e.jsx("label",{htmlFor:"waypoints",children:"Teleport Waypoints"})]})}),e.jsxs("div",{className:"layer-group",children:[e.jsx("div",{className:"layer-title",children:"Materials"}),e.jsxs("div",{className:"sublayer-list",children:[e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"materials-plants",checked:s.activeLayers.materials.plants,onChange:()=>i("materials","plants")}),e.jsx("label",{htmlFor:"materials-plants",children:"Plants"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"materials-ores",checked:s.activeLayers.materials.ores,onChange:()=>i("materials","ores")}),e.jsx("label",{htmlFor:"materials-ores",children:"Ores"})]}),e.jsxs("div",{className:"sublayer",children:[e.jsx("input",{type:"checkbox",id:"materials-animals",checked:s.activeLayers.materials.animals,onChange:()=>i("materials","animals")}),e.jsx("label",{htmlFor:"materials-animals",children:"Animals"})]})]})]}),e.jsx("div",{className:"layer-group",children:e.jsxs("div",{className:"layer-title",children:[e.jsx("input",{type:"checkbox",id:"custom-markers",checked:s.activeLayers.customMarkers,onChange:()=>i("customMarkers")}),e.jsx("label",{htmlFor:"custom-markers",children:"Custom Markers"})]})})]})},R=()=>{const{state:s,dispatch:t}=b(),[i,c]=j.useState(""),[m,x]=j.useState([{id:1,name:"Daily Crystal Farming",description:"Optimal route for mining all crystal spawns"},{id:2,name:"Mondstadt Specialties",description:"Gather all Mondstadt-specific plants"},{id:3,name:"Liyue Ore Run",description:"High-yield ore farming in Liyue region"}]),p=()=>{t({type:"TOGGLE_ROUTE_PLANNING"})},v=()=>{t({type:"CLEAR_ROUTE"})},N=()=>{console.log("Route saved:",i,s.currentRoute),alert(`Route "${i}" saved successfully!`),t({type:"CLEAR_ROUTE"}),c("")},r=l=>{const n=m.find(o=>o.id===l);if(!n)return;const a=[{id:1,position:[0,0],name:`${n.name} - Start`,description:"Starting point"},{id:2,position:[10,10],name:`${n.name} - Checkpoint 1`,description:"First resource location"},{id:3,position:[20,20],name:`${n.name} - Checkpoint 2`,description:"Second resource location"},{id:4,position:[30,30],name:`${n.name} - End`,description:"End point"}];t({type:"CLEAR_ROUTE"}),a.forEach(o=>{t({type:"ADD_ROUTE_WAYPOINT",waypoint:o})}),c(n.name)},h=()=>{const l={id:Math.floor(Math.random()*1e3),position:[Math.floor(Math.random()*100),Math.floor(Math.random()*100)],name:`Waypoint ${s.currentRoute.length+1}`,description:"Manually added waypoint"};t({type:"ADD_ROUTE_WAYPOINT",waypoint:l})};return e.jsxs("div",{className:"route-planner",children:[e.jsx("div",{className:"form-group",children:e.jsx("button",{className:`btn ${s.routePlanningMode?"btn-active":""}`,onClick:p,children:s.routePlanningMode?"Disable Route Planning":"Enable Route Planning"})}),s.routePlanningMode&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",className:"form-input",placeholder:"Route Name",value:i,onChange:l=>c(l.target.value)})}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn",onClick:h,children:"Add Waypoint"}),e.jsx("button",{className:"btn",onClick:v,children:"Clear Route"}),e.jsx("button",{className:"btn",onClick:N,disabled:s.currentRoute.length===0||!i,children:"Save Route"})]}),e.jsxs("div",{className:"route-stats",children:[e.jsxs("p",{children:["Current Route: ",i||"Unnamed"]}),e.jsxs("p",{children:["Waypoints: ",s.currentRoute.length]})]})]}),e.jsxs("div",{className:"templates-section",children:[e.jsx("h4",{children:"Route Templates"}),e.jsx("div",{className:"template-list",children:m.map(l=>e.jsxs("div",{className:"template-item",onClick:()=>r(l.id),children:[e.jsx("div",{className:"template-name",children:l.name}),e.jsx("div",{className:"template-desc",children:l.description})]},l.id))})]}),s.currentRoute.length>0&&e.jsxs("div",{className:"current-route",children:[e.jsx("h4",{children:"Current Waypoints"}),e.jsx("div",{className:"waypoint-list",children:s.currentRoute.map((l,n)=>e.jsxs("div",{className:"waypoint-item",children:[e.jsx("div",{className:"waypoint-number",children:n+1}),e.jsxs("div",{className:"waypoint-details",children:[e.jsx("div",{className:"waypoint-name",children:l.name}),e.jsx("div",{className:"waypoint-desc",children:l.description})]})]},l.id))})]})]})},u=[];for(let s=0;s<256;++s)u.push((s+256).toString(16).slice(1));function w(s,t=0){return(u[s[t+0]]+u[s[t+1]]+u[s[t+2]]+u[s[t+3]]+"-"+u[s[t+4]]+u[s[t+5]]+"-"+u[s[t+6]]+u[s[t+7]]+"-"+u[s[t+8]]+u[s[t+9]]+"-"+u[s[t+10]]+u[s[t+11]]+u[s[t+12]]+u[s[t+13]]+u[s[t+14]]+u[s[t+15]]).toLowerCase()}let C;const S=new Uint8Array(16);function P(){if(!C){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");C=crypto.getRandomValues.bind(crypto)}return C(S)}const A=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f={randomUUID:A};function L(s,t,i){var m;if(f.randomUUID&&!s)return f.randomUUID();s=s||{};const c=s.random??((m=s.rng)==null?void 0:m.call(s))??P();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,w(c)}const E=()=>{const{state:s,dispatch:t}=b(),[i,c]=j.useState(!1),[m,x]=j.useState({title:"",description:"",icon:"pin",isPublic:!1}),p=()=>{if(!m.title.trim())return;const r={id:L(),position:[41.5081,-81.6044],title:m.title,description:m.description,icon:m.icon,isPublic:m.isPublic,author:"Traveler",dateCreated:new Date().toISOString(),rating:0};t({type:"ADD_CUSTOM_MARKER",marker:r}),x({title:"",description:"",icon:"pin",isPublic:!1}),c(!1)},v=r=>{t({type:"REMOVE_CUSTOM_MARKER",id:r})},N=[{value:"pin",label:"ðŸ“ Pin",icon:"ðŸ“"},{value:"star",label:"â­ Star",icon:"â­"},{value:"warning",label:"âš ï¸ Warning",icon:"âš ï¸"},{value:"info",label:"â„¹ï¸ Info",icon:"â„¹ï¸"},{value:"treasure",label:"ðŸ’Ž Treasure",icon:"ðŸ’Ž"},{value:"camp",label:"ðŸ¥ Camp",icon:"ðŸ¥"}];return e.jsxs("div",{className:"custom-markers",children:[e.jsx("button",{className:"btn btn-primary full-width",onClick:()=>c(!i),children:"Add New Marker"}),i&&e.jsxs("div",{className:"add-marker-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("input",{type:"text",className:"form-input",value:m.title,onChange:r=>x(h=>({...h,title:r.target.value})),placeholder:"Marker title..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-input",rows:3,value:m.description,onChange:r=>x(h=>({...h,description:r.target.value})),placeholder:"Optional description..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Icon"}),e.jsx("select",{className:"form-input",value:m.icon,onChange:r=>x(h=>({...h,icon:r.target.value})),children:N.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"toggle-switch",onClick:()=>x(r=>({...r,isPublic:!r.isPublic})),children:[e.jsx("span",{className:"toggle-label",children:"Make Public"}),e.jsx("div",{className:`toggle-control ${m.isPublic?"active":""}`})]})}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"btn btn-primary",onClick:p,children:"Add Marker"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>c(!1),children:"Cancel"})]}),e.jsx("p",{className:"help-text",children:'Click on the map after clicking "Add Marker" to place it.'})]}),e.jsxs("div",{className:"markers-list",children:[e.jsxs("h4",{className:"list-title",children:["My Markers (",s.customMarkers.length,")"]}),s.customMarkers.length===0?e.jsx("p",{className:"empty-state",children:"No custom markers yet. Add your first marker to get started!"}):s.customMarkers.map(r=>{var h;return e.jsxs("div",{className:"marker-item",children:[e.jsx("div",{className:"marker-icon",children:((h=N.find(l=>l.value===r.icon))==null?void 0:h.icon)||"ðŸ“"}),e.jsxs("div",{className:"marker-info",children:[e.jsx("h5",{children:r.title}),r.description&&e.jsx("p",{children:r.description}),e.jsxs("div",{className:"marker-meta",children:[e.jsxs("span",{className:"marker-author",children:["By ",r.author]}),e.jsx("span",{className:"marker-visibility",children:r.isPublic?"ðŸŒ Public":"ðŸ”’ Private"})]})]}),e.jsx("button",{className:"btn-icon delete-marker",onClick:()=>v(r.id),title:"Remove marker",children:"âœ•"})]},r.id)})]}),e.jsxs("div",{className:"community-markers",children:[e.jsx("h4",{className:"list-title",children:"Community Highlights"}),e.jsxs("div",{className:"marker-item community",children:[e.jsx("div",{className:"marker-icon",children:"â­"}),e.jsxs("div",{className:"marker-info",children:[e.jsx("h5",{children:"Hidden Chest Location"}),e.jsx("p",{children:"Secret chest behind waterfall in Mondstadt"}),e.jsxs("div",{className:"marker-meta",children:[e.jsx("span",{className:"marker-author",children:"By Adventurer_123"}),e.jsx("span",{className:"marker-rating",children:"â­ 4.8 (127 ratings)"})]})]})]}),e.jsxs("div",{className:"marker-item community",children:[e.jsx("div",{className:"marker-icon",children:"ðŸ’Ž"}),e.jsxs("div",{className:"marker-info",children:[e.jsx("h5",{children:"Best Mining Spot"}),e.jsx("p",{children:"Crystal Chunk respawn point - high yield"}),e.jsxs("div",{className:"marker-meta",children:[e.jsx("span",{className:"marker-author",children:"By MinerMaster"}),e.jsx("span",{className:"marker-rating",children:"â­ 4.6 (89 ratings)"})]})]})]}),e.jsxs("div",{className:"marker-item community",children:[e.jsx("div",{className:"marker-icon",children:"ðŸ¥"}),e.jsxs("div",{className:"marker-info",children:[e.jsx("h5",{children:"Great Photo Spot"}),e.jsx("p",{children:"Perfect view of Liyue Harbor at sunset"}),e.jsxs("div",{className:"marker-meta",children:[e.jsx("span",{className:"marker-author",children:"By PhotoTraveler"}),e.jsx("span",{className:"marker-rating",children:"â­ 4.9 (203 ratings)"})]})]})]})]})]})},T=()=>{const[s,t]=j.useState([]),[i,c]=j.useState({name:"",needed:0}),[m,x]=j.useState(!1);j.useEffect(()=>{const l=localStorage.getItem("resourceCalculator");if(l)try{t(JSON.parse(l))}catch(n){console.error("Error loading saved materials:",n)}else t([{name:"Violetgrass",needed:168,collected:45,locations:[{region:"Liyue",location:"Qingce Village Cliffs",quantity:8,respawnHours:48},{region:"Liyue",location:"Mt. Tianheng",quantity:6,respawnHours:48}]},{name:"Silk Flower",needed:168,collected:23,locations:[{region:"Liyue",location:"Wangshu Inn",quantity:5,respawnHours:48},{region:"Liyue",location:"Liyue Harbor",quantity:7,respawnHours:48}]}])},[]),j.useEffect(()=>{localStorage.setItem("resourceCalculator",JSON.stringify(s))},[s]);const p=()=>{if(!i.name.trim()||i.needed<=0)return;const l={name:i.name,needed:i.needed,collected:0,locations:[]};t(n=>[...n,l]),c({name:"",needed:0}),x(!1)},v=(l,n)=>{t(a=>a.map((o,d)=>d===l?{...o,collected:Math.max(0,Math.min(n,o.needed))}:o))},N=l=>{t(n=>n.filter((a,o)=>o!==l))},r=l=>Math.round(l.collected/l.needed*100),h=l=>{if(l.collected>=l.needed)return 0;const n=l.needed-l.collected,a=l.locations.reduce((o,d)=>o+d.quantity,0);return a===0?0:Math.ceil(n/a)};return e.jsxs("div",{className:"resource-calculator",children:[e.jsxs("div",{className:"calculator-header",children:[e.jsx("h4",{children:"ðŸ“‹ Resource Calculator"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>x(!m),children:"Add Material"})]}),m&&e.jsxs("div",{className:"add-material-form",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",placeholder:"Material name...",className:"form-input",value:i.name,onChange:l=>c(n=>({...n,name:l.target.value}))})}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"number",placeholder:"Amount needed",className:"form-input",value:i.needed||"",onChange:l=>c(n=>({...n,needed:parseInt(l.target.value)||0}))})}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"btn btn-primary",onClick:p,children:"Add"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>x(!1),children:"Cancel"})]})]}),e.jsx("div",{className:"materials-list",children:s.length===0?e.jsx("p",{className:"empty-state",children:"No materials tracked yet. Add your first material to get started!"}):s.map((l,n)=>{const a=r(l),o=h(l);return e.jsxs("div",{className:"material-item",children:[e.jsxs("div",{className:"material-header",children:[e.jsx("h5",{children:l.name}),e.jsx("button",{className:"btn-icon delete-material",onClick:()=>N(n),title:"Remove material",children:"âœ•"})]}),e.jsxs("div",{className:"material-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${a}%`}})}),e.jsxs("span",{className:"progress-text",children:[l.collected," / ",l.needed," (",a,"%)"]})]}),e.jsxs("div",{className:"material-controls",children:[e.jsx("button",{className:"btn-icon",onClick:()=>v(n,l.collected-1),disabled:l.collected<=0,children:"-"}),e.jsx("input",{type:"number",className:"quantity-input",value:l.collected,onChange:d=>v(n,parseInt(d.target.value)||0),min:"0",max:l.needed}),e.jsx("button",{className:"btn-icon",onClick:()=>v(n,l.collected+1),disabled:l.collected>=l.needed,children:"+"})]}),o>0&&e.jsx("div",{className:"material-estimate",children:e.jsxs("span",{className:"days-needed",children:["ðŸ—º ",o," days remaining"]})}),l.locations.length>0&&e.jsxs("div",{className:"material-locations",children:[e.jsx("h6",{children:"Best Locations:"}),l.locations.map((d,g)=>e.jsxs("div",{className:"location-item",children:[e.jsxs("span",{className:"location-name",children:[d.location,", ",d.region]}),e.jsxs("span",{className:"location-yield",children:["~",d.quantity," (",d.respawnHours,"h)"]})]},g))]})]},n)})}),s.length>0&&e.jsxs("div",{className:"calculator-summary",children:[e.jsx("h5",{children:"Summary"}),e.jsxs("div",{className:"summary-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Total Materials:"}),e.jsx("span",{className:"stat-value",children:s.length})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Completed:"}),e.jsx("span",{className:"stat-value",children:s.filter(l=>l.collected>=l.needed).length})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Overall Progress:"}),e.jsxs("span",{className:"stat-value",children:[Math.round(s.reduce((l,n)=>l+n.collected,0)/s.reduce((l,n)=>l+n.needed,0)*100),"%"]})]})]})]})]})},O=()=>{const{state:s}=b(),[t,i]=j.useState([]),[c,m]=j.useState("all"),[x,p]=j.useState([]);j.useEffect(()=>{(async()=>{try{const d=await(await fetch("/data/achievements.json")).json();i(d.achievements);const g=[...new Set(d.achievements.map(y=>y.category))];p(["all",...g])}catch(o){console.error("Error loading achievements:",o)}})()},[]);const v=(a,o)=>{i(d=>d.map(g=>g.id===a?{...g,progress:Math.max(0,Math.min(o,g.maxProgress)),completed:o>=g.maxProgress}:g))},N=t.filter(a=>c==="all"?!0:c==="completed"?a.completed:c==="in-progress"?!a.completed&&a.progress>0:c==="not-started"?a.progress===0:a.category===c),r=(a,o)=>{const d=a/o*100;return d>=100?"var(--dendro-green)":d>=75?"var(--geo-amber)":d>=50?"var(--hydro-blue)":d>=25?"var(--anemo-teal)":"var(--muted-stone)"},h=t.filter(a=>a.completed).reduce((a,o)=>a+o.primogems,0),l=t.filter(a=>a.completed).length,n=t.length;return e.jsxs("div",{className:"achievement-tracker",children:[e.jsxs("div",{className:"tracker-header",children:[e.jsx("h4",{children:"ðŸ† Achievement Tracker"}),e.jsxs("div",{className:"achievement-stats",children:[e.jsxs("span",{className:"stat",children:[l,"/",n," completed"]}),e.jsxs("span",{className:"stat primogems",children:["ðŸ’Ž ",h," earned"]})]})]}),e.jsx("div",{className:"achievement-filters",children:e.jsxs("select",{className:"form-input",value:c,onChange:a=>m(a.target.value),children:[e.jsx("option",{value:"all",children:"All Achievements"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"not-started",children:"Not Started"}),x.slice(1).map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx("div",{className:"achievements-list",children:N.length===0?e.jsx("p",{className:"empty-state",children:"No achievements found for the selected filter."}):N.map(a=>{const o=a.progress/a.maxProgress*100;return e.jsxs("div",{className:`achievement-item ${a.completed?"completed":""}`,children:[e.jsxs("div",{className:"achievement-header",children:[e.jsxs("div",{className:"achievement-info",children:[e.jsxs("h5",{className:"achievement-name",children:[a.completed?"âœ“ ":"",a.name]}),e.jsx("span",{className:"achievement-category",children:a.category})]}),e.jsxs("div",{className:"achievement-reward",children:["ðŸ’Ž ",a.primogems]})]}),e.jsx("p",{className:"achievement-description",children:a.description}),e.jsxs("div",{className:"achievement-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${o}%`,backgroundColor:r(a.progress,a.maxProgress)}})}),e.jsxs("div",{className:"progress-controls",children:[e.jsxs("span",{className:"progress-text",children:[a.progress," / ",a.maxProgress]}),!a.completed&&e.jsxs("div",{className:"progress-buttons",children:[e.jsx("button",{className:"btn-icon",onClick:()=>v(a.id,a.progress-1),disabled:a.progress<=0,children:"-"}),e.jsx("button",{className:"btn-icon",onClick:()=>v(a.id,a.progress+1),disabled:a.progress>=a.maxProgress,children:"+"})]})]})]}),a.requirements.length>0&&e.jsxs("div",{className:"achievement-requirements",children:[e.jsx("h6",{children:"Requirements:"}),e.jsx("ul",{children:a.requirements.map((d,g)=>e.jsx("li",{children:d},g))})]}),a.relatedLocations&&a.relatedLocations.length>0&&e.jsx("div",{className:"achievement-locations",children:e.jsxs("button",{className:"btn btn-secondary small",children:["ðŸ—º Show on Map (",a.relatedLocations.length,")"]})})]},a.id)})}),t.length>0&&e.jsxs("div",{className:"category-summary",children:[e.jsx("h5",{children:"Progress by Category"}),x.slice(1).map(a=>{const o=t.filter(k=>k.category===a),d=o.filter(k=>k.completed).length,g=o.length,y=Math.round(d/g*100);return e.jsxs("div",{className:"category-progress",children:[e.jsxs("div",{className:"category-info",children:[e.jsx("span",{className:"category-name",children:a}),e.jsxs("span",{className:"category-stats",children:[d,"/",g," (",y,"%)"]})]}),e.jsx("div",{className:"category-bar",children:e.jsx("div",{className:"category-fill",style:{width:`${y}%`}})})]},a)})]})]})},I=({isOpen:s,onToggle:t})=>{const{state:i,dispatch:c}=b(),[m,x]=j.useState(""),[p,v]=j.useState({layers:!0,routes:!1,markers:!1,tools:!1}),N=r=>{v(h=>({...h,[r]:!h[r]}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`sidebar ${s?"open":"collapsed"} fade-in`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h1",{className:"sidebar-title",children:s?"Teyvat Interactive Map":"TIM"}),e.jsx("button",{className:"btn-icon",onClick:t,"aria-label":"Toggle Sidebar",children:s?"â†":"â†’"})]}),s&&e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",placeholder:"Search locations, materials...",className:"form-input",value:m,onChange:r=>x(r.target.value)})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Map Version"}),e.jsxs("select",{className:"form-input",value:i.mapVersion,onChange:r=>c({type:"SET_MAP_VERSION",version:r.target.value}),children:[e.jsx("option",{value:"current",children:"Current (v4.2)"}),e.jsx("option",{value:"4.1",children:"Version 4.1"}),e.jsx("option",{value:"4.0",children:"Version 4.0"}),e.jsx("option",{value:"3.8",children:"Version 3.8"})]})]}),e.jsxs("div",{className:"collapsible-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>N("layers"),children:[e.jsx("h3",{className:"section-title",children:"Layer Management"}),e.jsx("span",{children:p.layers?"â–¼":"â–¶"})]}),e.jsx("div",{className:`section-content ${p.layers?"expanded":""}`,children:e.jsx(M,{})})]}),e.jsxs("div",{className:"collapsible-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>N("routes"),children:[e.jsx("h3",{className:"section-title",children:"Route Planner"}),e.jsx("span",{children:p.routes?"â–¼":"â–¶"})]}),e.jsx("div",{className:`section-content ${p.routes?"expanded":""}`,children:e.jsx(R,{})})]}),e.jsxs("div",{className:"collapsible-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>N("markers"),children:[e.jsx("h3",{className:"section-title",children:"Custom Markers"}),e.jsx("span",{children:p.markers?"â–¼":"â–¶"})]}),e.jsx("div",{className:`section-content ${p.markers?"expanded":""}`,children:e.jsx(E,{})})]}),e.jsxs("div",{className:"collapsible-section",children:[e.jsxs("div",{className:"section-header",onClick:()=>N("tools"),children:[e.jsx("h3",{className:"section-title",children:"Tools & Trackers"}),e.jsx("span",{children:p.tools?"â–¼":"â–¶"})]}),e.jsxs("div",{className:`section-content ${p.tools?"expanded":""}`,children:[e.jsx(T,{}),e.jsx(O,{})]})]})]})]})})};export{I as default};
